---
- name: Create a started container
  community.general.lxd_container:
    name: mycontainer
    ignore_volatile_options: true
    state: started
    source:
      type: image
      mode: pull
      server: https://images.linuxcontainers.org
      protocol: simplestreams
      alias: ubuntu/bionic/amd64
    wait_for_ipv4_addresses: true
    timeout: 600

# - name: Check python is installed in container
#   delegate_to: mycontainer
#   ansible.builtin.raw: dpkg -s python
#   register: python_install_check
#   failed_when: python_install_check.rc not in [0, 1]
#   changed_when: false
#
# - name: Install python in container
#   delegate_to: mycontainer
#   ansible.builtin.raw: apt-get install -y python
#   when: python_install_check.rc == 1
